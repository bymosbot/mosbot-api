# Configuration Reference

All configuration is provided via environment variables. Copy `.env.example` to `.env` to get started.

## Required variables

| Variable | Description |
| -------- | ----------- |
| `DB_PASSWORD` | PostgreSQL password |
| `JWT_SECRET` | JWT signing secret. Generate with: `node -e "console.log(require('crypto').randomBytes(48).toString('hex'))"` |
| `CORS_ORIGIN` | Exact dashboard origin (e.g. `https://dashboard.example.com`). Cannot be `*`. |

## Server

| Variable | Default | Description |
| -------- | ------- | ----------- |
| `PORT` | `3000` | HTTP port |
| `NODE_ENV` | `development` | `development` or `production` |
| `TIMEZONE` | `UTC` | IANA timezone for cron schedules and time displays |

## Database

| Variable | Default | Description |
| -------- | ------- | ----------- |
| `DB_HOST` | `localhost` | PostgreSQL host |
| `DB_PORT` | `5432` | PostgreSQL port |
| `DB_NAME` | `mosbot` | Database name |
| `DB_USER` | `mosbot` | Database user |
| `DB_PASSWORD` | — | Database password (**required**) |

Test database (optional — used for integration tests when set):

| Variable | Description |
| -------- | ----------- |
| `TEST_DB_HOST` | Test DB host |
| `TEST_DB_PORT` | Test DB port |
| `TEST_DB_NAME` | Test DB name |
| `TEST_DB_USER` | Test DB user |
| `TEST_DB_PASSWORD` | Test DB password |

## Auth

| Variable | Default | Description |
| -------- | ------- | ----------- |
| `JWT_SECRET` | — | JWT signing secret (**required**) |
| `JWT_EXPIRES_IN` | `7d` | Token expiry (e.g. `7d`, `24h`) |

## Bootstrap (first run only)

| Variable | Description |
| -------- | ----------- |
| `BOOTSTRAP_OWNER_EMAIL` | Email for the initial owner account |
| `BOOTSTRAP_OWNER_PASSWORD` | Password (min 12 chars). Remove after first login. |
| `BOOTSTRAP_OWNER_NAME` | Display name (default: `Owner`) |

## Archive job

| Variable | Default | Description |
| -------- | ------- | ----------- |
| `ENABLE_ARCHIVER` | `true` | Enable the automatic task archiver |
| `ARCHIVE_CRON` | `0 3 * * *` | Cron schedule for archiving |
| `ARCHIVE_AFTER_DAYS` | `7` | Archive tasks completed more than N days ago |
| `ARCHIVE_ON_STARTUP` | `false` | Run archiver immediately on startup |

## OpenClaw Workspace (optional)

| Variable | Default | Description |
| -------- | ------- | ----------- |
| `OPENCLAW_WORKSPACE_URL` | — | URL of the OpenClaw workspace service |
| `OPENCLAW_WORKSPACE_TOKEN` | — | Bearer token for workspace service auth |

## OpenClaw Gateway (optional)

| Variable | Default | Description |
| -------- | ------- | ----------- |
| `OPENCLAW_GATEWAY_URL` | — | URL of the OpenClaw gateway |
| `OPENCLAW_GATEWAY_TOKEN` | — | Bearer token for gateway auth |
| `OPENCLAW_GATEWAY_TIMEOUT_MS` | `15000` | Request timeout in ms |

## OpenClaw Device Auth (optional)

Required for full session access (operator.read/write scopes). Generated by the OpenClaw pairing flow.

| Variable | Description |
| -------- | ----------- |
| `OPENCLAW_DEVICE_ID` | Device identifier |
| `OPENCLAW_DEVICE_PUBLIC_KEY` | Ed25519 public key (base64url) |
| `OPENCLAW_DEVICE_PRIVATE_KEY` | Ed25519 private key (base64url) |
| `OPENCLAW_DEVICE_TOKEN` | Device pairing token |

## Subagent data retention

| Variable | Default | Description |
| -------- | ------- | ----------- |
| `SUBAGENT_RETENTION_DAYS` | `30` | Keep subagent data for N days |
| `ACTIVITY_LOG_RETENTION_DAYS` | `7` | Keep activity logs for N days |
| `RETENTION_ARCHIVE_ENABLED` | `true` | Enable retention archiving |
| `ENABLE_SUBAGENT_RETENTION_PURGE` | `true` | Enable automatic purge |
| `SUBAGENT_RETENTION_CRON` | `0 3 * * *` | Purge cron schedule |
| `SUBAGENT_RETENTION_ON_STARTUP` | `false` | Run purge on startup |

## Model pricing (optional)

| Variable | Default | Description |
| -------- | ------- | ----------- |
| `OPENROUTER_API_KEY` | — | OpenRouter API key for pricing data |
| `MODEL_PRICING_REFRESH_INTERVAL_MS` | `604800000` (7 days) | How often to refresh pricing |
