# ============================================================
# MosBot API — Environment Variables
# Copy this file to .env and fill in the values.
# Never commit .env to version control.
# ============================================================

# Server
PORT=3000
NODE_ENV=development

# Instance timezone (IANA format, e.g. America/New_York, Asia/Singapore)
# Affects cron schedules and time displays. Defaults to UTC.
TIMEZONE=UTC

# ── Database ─────────────────────────────────────────────────
DB_HOST=localhost
DB_PORT=5432
DB_NAME=mosbot
DB_USER=mosbot
DB_PASSWORD=change-me-use-a-strong-password

# Test database (optional — used for integration tests when set)
# TEST_DB_HOST=localhost
# TEST_DB_PORT=5432
# TEST_DB_NAME=mosbot_test
# TEST_DB_USER=mosbot
# TEST_DB_PASSWORD=change-me

# ── Auth ─────────────────────────────────────────────────────
# Generate with: node -e "console.log(require('crypto').randomBytes(48).toString('hex'))"
JWT_SECRET=replace-with-a-long-random-secret
JWT_EXPIRES_IN=7d

# ── CORS ─────────────────────────────────────────────────────
# Must be the exact origin of the dashboard (no trailing slash).
# Cannot be "*" when credentials are enabled.
CORS_ORIGIN=http://localhost:5173

# ── Bootstrap (first run only) ───────────────────────────────
# Set these to create the first owner account on a fresh database.
# Unset (or remove) after the first successful login.
BOOTSTRAP_OWNER_EMAIL=admin@example.com
BOOTSTRAP_OWNER_PASSWORD=replace-with-strong-password-min-12-chars
BOOTSTRAP_OWNER_NAME=Admin

# ── Archive job ──────────────────────────────────────────────
ENABLE_ARCHIVER=true
ARCHIVE_CRON=0 3 * * *
ARCHIVE_AFTER_DAYS=7
ARCHIVE_ON_STARTUP=false

# ── OpenClaw Workspace Integration (optional) ────────────────
# Local dev: kubectl port-forward -n <namespace> svc/openclaw-workspace 8080:8080
# Production: http://openclaw-workspace.<namespace>.svc.cluster.local:8080
OPENCLAW_WORKSPACE_URL=http://localhost:8080
OPENCLAW_WORKSPACE_TOKEN=your-workspace-token

# ── OpenClaw Gateway Integration (optional) ──────────────────
# Local dev: kubectl port-forward -n <namespace> svc/openclaw 18789:18789
# Production: http://openclaw.<namespace>.svc.cluster.local:18789
OPENCLAW_GATEWAY_URL=http://localhost:18789
OPENCLAW_GATEWAY_TOKEN=your-gateway-token
# OPENCLAW_GATEWAY_TIMEOUT_MS=15000

# ── OpenClaw Device Auth (optional, required for full session access) ─
# Generated by the OpenClaw pairing flow. See docs/integrations/openclaw.md.
# OPENCLAW_DEVICE_ID=your-device-id
# OPENCLAW_DEVICE_PUBLIC_KEY=your-public-key-base64url
# OPENCLAW_DEVICE_PRIVATE_KEY=your-private-key-base64url
# OPENCLAW_DEVICE_TOKEN=your-device-token

# ── Subagent data retention ───────────────────────────────────
SUBAGENT_RETENTION_DAYS=30
ACTIVITY_LOG_RETENTION_DAYS=7
RETENTION_ARCHIVE_ENABLED=true
ENABLE_SUBAGENT_RETENTION_PURGE=true
SUBAGENT_RETENTION_CRON=0 3 * * *
SUBAGENT_RETENTION_ON_STARTUP=false

# ── OpenRouter model pricing (optional) ──────────────────────
# Used to estimate session cost for models without built-in pricing data.
# The public endpoint works without a key; a key may give more accurate data.
# OPENROUTER_API_KEY=sk-or-...
# MODEL_PRICING_REFRESH_INTERVAL_MS=604800000
